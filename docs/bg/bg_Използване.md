Цели
=====

AndroidAPS има серия от цели, които трябва да бъдат завършени, за да ви преведе през функциите и настройките на безопасното прибиране. Те гарантират, че сте конфигурирали всичко, описано подробно в горните секции, правилно и че разбирате какво прави вашата система и защо можете да й се доверите.

Ако актуализирате телефоните, можете да експортирате настройките си, за да поддържате напредъка си чрез целите; в трите точки в горния десен ъгъл изберете _Export settings_, тя ще ви каже коя папка е запазила файла. На новия ви телефон копирайте файла на това местоположение и след това изберете _Импорт настройки_. Не само ще бъде запазен напредъкът ви чрез целите, но и вашите настройки за безопасност, като максимален болус и т.н. Ако не експортирате и импортирате вашите настройки, ще трябва да започнете отново задачите отначало. Добра идея е да архивирате често настройките си само в случай.

* ** Цел 1: ** Създаване на визуализация и мониторинг и анализ на основите и съотношенията
  * Изберете правилния източник на кръвна захар за вашата настройка. За повече информация вижте [BG Source] (http://androidaps-user-guide.readthedocs.io/en/latest/en/en_Configuration.html#BG Източник).
  * Изберете правилната помпа в ConfigBuilder (изберете Virtual Pump, ако използвате модел на помпа без AndroidAPS драйвер за отворен цикъл), за да сте сигурни, че състоянието на помпата ви може да комуникира с AndroidAPS. Ако използвате DanaR помпа, уверете се, че сте следвали инструкциите [DanaR Insulin Pump] (https://github.com/MilosKozak/AndroidAPS/wiki/DanaR-Insulin-Pump), за да осигурите връзката между помпата и AndroidAPS.
  * Следвайте инструкциите в страницата [Nightscout] (http://androidaps-user-guide.readthedocs.io/en/latest/en/en_Configuration.html#nightscout), за да сте сигурни, че Nightscout може да получава и показва тези данни.
<br> <br> _Може да се наложи да изчакате следващото четене на кръвната захар да пристигне, преди AndroidAPS да го разпознае._
 
* ** Цел 2: ** Започване на отворен цикъл
  * Изберете "Отвори" или от "Предпочитания", или като натиснете и задръжте бутона Loop в горния ляв ъгъл на началния екран.
  * Работете в [[Предпочитания]], за да настроите за вас.
  * Ръчно да приемете поне 20 от временните предложения за базовата ставка за период от 7 дни; ги въведете в помпата си и потвърдете в AndroidAPS, че сте ги приели. Уверете се, че тези данни се показват в AndroidAPS и Nightscout.
 
* ** Цел 3: ** Разбиране на вашия отворен контур, включително неговите основни препоръки
  * Започнете да разберете мисленето зад базовите препоръки, като разгледате [определете основната логика] (https://openaps.readthedocs.io/en/latest/docs/While%20You%20Wait%20For%20Gear/Understand-determine-basal.html) и прогнозната линия в началния екран на AndroidAPS / Nightscout, както и обобщението на резултатите от изчисленията в раздела OpenAPS.
  <br><br>_You will want to set your target higher than usual until you are confident in the calculations and settings.  The system allows a low target to be a minimum of 4 or maximum of 10, and a high target to be a minimum of 5 and maximum of 15.  A temporary target as a single value can be anywhere in the range of 4 to 15.  The target is the value that calculations are based on, and not the same as where you aim to keep your blood glucose values within.  If your target is very wide (say, 3 or more mmol wide), you will often find because blood glucose is eventually predicted to be somewhere in that wide range not many fluctuating temporary basal rates are suggested. You may want to experiment with adjusting your targets to be a closer together range (say, 1 or less mmol wide), and observe how the behavior of your system changes as a result.  You can view a wider range (green lines) on the graph for the values you aim to keep your blood glucose within by entering different values in Preference > Range for Visualisation._
  <br> <br> _Задръжте тук, ако сте отворен цикъл с виртуална помпа - не кликвайте върху Проверка в края на тази цел._

* ** Цел 4: ** Започване на затваряне на цикъла с ниско съдържание на глюкоза
  * Изберете "Затворена бримка" или от "Предпочитания", или като натиснете и задържите бутона "Отвори отвор" в горния ляв ъгъл на началния екран.
  * Задайте целевия диапазон малко по-висок, отколкото обикновено искате, само за да сте сигурни.
  * Гледайте как са активирани временните основи чрез преглеждане на синьо-основния текст на началния екран или на синьото основно оформление на графиката на началния екран.
  * Уверете се, че настройките ви са поддържали AndroidAPS, за да избегнете необходимостта от лечение на ниска глюкоза за период от 5 дни. Ако все още имате чести или тежки ниски глюкозни епизоди, помислете за прецизиране на съотношенията DIA, basal, ISF и carb.
<br><br>_The system will override your maxIOB settings to zero, which means if blood glucose is dropping it can reduce basal for you, but if blood glucose is rising then it will only increase basal if the IOB is negative (from a previous Low Glucose Suspend), otherwise basal rates will remain the same as your selected profile.  You may temporarily experience spikes following treated hypos without the ability to increase basal on the rebound._
 
* ** Цел 5: ** Настройка на затворения цикъл, повишаване на максимума IOB над 0 и постепенно намаляване на BG цели
  * Увеличете maxIOB над 0 за период от 1 ден, по подразбиране се препоръчва да бъде 2, но трябва бавно да работите до това, докато не знаете, че вашите настройки работят за вас.
  * Веднъж уверени в това колко IOB отговаря на вашите структури, след това намалете целите си до желаното ниво.
 
* ** Цел 6: ** Регулирайте основите и коефициентите, ако е необходимо, и след това разрешете автоматичното търсене
  * Можете да използвате [autotune] (https://openaps.readthedocs.io/en/latest/docs/Customize-Iterate/autotune.html) като отделен, за да проверите дали вашите основи са точни или направете традиционен базален тест.
  * Активирайте [auto-sense] (http://androidaps-user-guide.readthedocs.io/en/latest/en/en_Usage.html#open-aps-features) за период от 7 дни и гледайте бялата линия на диаграмата на началния екран показва как чувствителността Ви към инсулин може да се увеличава или понижава в резултат на физически упражнения или хормони и т.н. и да проверявате в раздела Отчет на OpenAPS как AndroidAPS коригира основите и / или целите съответно.
<br> <br> _Не забравяйте да запишете своя looping в [тази форма] (http://bit.ly/nowlooping), като влезете в AndroidAPS като вид софтуер за домашен цикъл, ако все още не сте го направили._
 
* ** Цел 7: ** Разрешаване на допълнителни функции за използване през деня, като например усъвършенствана помощ за хранене
  * Сега трябва да се чувствате уверени в начина, по който AndroidAPS работи и какви настройки отразяват най-добре диабета ви, а след това за период от 14 дни можете да опитате допълнителни функции, които автоматизират още повече работа за вас.

Open-APS-функции
================

Някои от функците на AndroidAPS са взаимствани от OpenAPS oref0 и преглд на OpenAPS документацията ще Ви даде по-пълна  представа за тях:

* [Advanced Meal Assist (AMA)](http://openaps.readthedocs.io/en/latest/docs/walkthrough/phase-4/advanced-features.html#advanced-meal-assist-or-ama) - след поставянето на болус за хранене(meal bolus), ситемата може да вдигне базалните нива по-бързо, ако въглехидратите са правилно въведени. За да включите тази опция в таб Конфигурация ще трябва да сте преминали цел 7.
* [Autosens](http://openaps.readthedocs.io/en/latest/docs/walkthrough/phase-4/advanced-features.html#auto-sensitivity-mode) - анализ в реално време на това до колко тялото Ви е чувствително/резистентно на провежданото лечение с инсулин в сравнение със зададените в профила параметри. Можете да го включите от меню Опции, като за да го направите ще е необходимо да сте преминали цел 6.
* [Temporary Targets -(Eating Soon и Activity Mode)](http://openaps.readthedocs.io/en/latest/docs/walkthrough/phase-4/advanced-features.html#eating-soon-and-activity-mode-temporary-targets) - Временни цели или “темп” са идеални за ситуации в които желаете AndroidAPS да приложи други целеви нива на КЗ за кратък период от време(1-2 часа). Например когато планирате да се храните или спортувате. Можете да задавате временни цели по няколко начина - чрез избор на TempT опцията на часовника, 'Временна цел' бутона  в таб Действия, или чрез натискане и задържане върху текущата цел на главния екран. Временните цели имат продължителност по подразбиране, така няма да е необходимо да ги изключвате всеки път.
  В главната страница целевата захар ще бъде в син фон, ако е взета от профила, и в зелен ако е временна такава.
  
Процентен-профил
================

* За да активирате Процентен профил отидете в таб Конфигурация иберете го и изберете да е видим
* В таб Процентен профил въведете вашият базален профил към момента. Това ще е профилът по подразбиране, той ще бъде използван, когато AndroidAPS не работи. Този профил може да бъде променян по два начина:
  * Timeshift - Тази опция премества целият профил с толкова часа, колкото са зададени.  Например ако работите нощна смяна можете да въведете като стойност колко часа по-рано/по-късно лягате.
  * Percentage - Тази опция прилага процентна корекция върху всички стойности в профила. Ако го зададете на 130% (което ще означава 30% по-резистентни към инсулина), ще завиши базалните нива с 30%. Също така ще намали ISF и IC със същия процент (ще ги раздели на  1.3 в нашия пример). Трябва да бъде изпратен към помпата ( от бутона ) за да влезе в действие като текущ профил. Алгоритъмът ще работи в допълнение на зададения процентен профил. Така например отделни процентни профили могат да бъдат дефинирани за отделните етапи на хормонален цикъл.

Работа-с-профили-след-v1.5
==========================

От версия 1.5 нататък логиката на работа с профили е променена.

До версия 1.46 всяка промяна влизаше в сила от момента на въвеждането й.

AAPS може още да работи по този начин, до момента в който зададете "Смяна на профил"("Profile switch") с нулева продължителност ( обяснено по-долу ). След като се случи това AAPS започва да следи историята на профилите и всяка промяна в тях ще изисква нова "Смяна на профил"("Profile switch")дори ако смените съдържанието на профила в NS. Обновеният профил е видим в AAPS веднага, но ще трябва да има събитие "Смяна на профил"("Profile switch") за да започне използването ба променената версия.

Вътрешно AAPS си създава копие на профила със стартова дата и продължителност и го използва за избрания период. Нулева продължителност означава - вечно и такъв профил би бил валиден до следващата смяна.

Ако зададете продължителност при "Смяна на профил"("Profile switch"), то при изтичане на зададения период програмта автоматично ще превключи обратно към предишният профил.

Ако използвате локален тип AAPS профили ( Процентен, Опростен, Локален ) ще се наложи да натиснете бутона в съответния профил за да приложите промените ( което ще създаде "Смяна на профил"("Profile switch") автоматично ).

Този начин на действие позволява по-точни калкулации и по-добро следене в промените.

В режим 'closed loop' се препоръчва да активирате автоматичното обновяване на профила в помпата(от меню Опции).

Профил Безплатен връх 0ref
===========================

С профила "Free Peak 0ref" за Fiasp можете да въведете, когато ще бъде достигната максималната продължителност на действие.

DIA автоматично се настройва на 5 часа, ако той не е посочен по-високо в профила.

Следното обяснение е на английски, но графиките отново са ясни.

http://www.diabettech.com/insulin/why-we-are-regularly-wrong-in-the-duration-of-insulin-action-dia-times-we-use-and-why-it-matters/

![DIA explanation from diabettech.com](https://i1.wp.com/www.diabettech.com/wp-content/uploads/2017/07/DIA-Clamp.jpg?w=892)
<small>(Source: diabettech.com)</small>

За мнозина, практически няма видим ефект от Fiasp след 3-4 часа, но все пак има 0.0xx единици на разположение.

Те могат да бъдат напр. в спорта, но все още забележим.

Затова AndroidAPS използва минимум 5 часа като DIA.

SMS-Команди
===========

*BG*
- Дава информация за последната КЗ и IOB
- Last BG: 5.6 4min ago, Delta: -0,2 mmol, IOB: 0.20U (Bolus: 0.10U Basal: 0.10U)

*LOOP STOP/DISABLE*
- Спиране на Loop (автоматичният режим)

*LOOP START/ENABLE*
- Loop стартиране

*LOOP STATUS*
- Ще получите отговор от рода на:
- Loop is disabled - (Loop изключен)
- Loop is enabled - (Loop активен)
- Suspended (10 min) (Loop изключен за следващите 10 мин)

*LOOP SUSPEND 20*
-  Изключи Loop за 20 минути 

*LOOP RESUME*
-  Loop възстанови

*TREATMENTS REFRESH*
- Обнови леченията от NightScout

*NSCLIENT RESTART*
- Рестартирай NSCLIENT

*DANAR*
- Данни за статуса на Dana R помпата, отговорът ще бъде от типа
- Last conn: 1 minago Temp: 0.00U/h @11:38 5/30min IOB: 0.5U Reserv: 34U Batt: 100

*BASAL STOP/CANCEL*
- За да спрете базал (ще трябва да отговорите с код EmF)

*BASAL 0.3*
- Стартиране на базал от 0.3Ед/ч ( ще трябва да отговорите с код Swe )
- Няма да бъде изпълнено ако _(не са разрешени отдалечените команди)_

*BOLUS 1.2*
- Стартирай болус от 1.2 единици ( ще трябва да отговорите с код Rrt )
- Стартирането на болус няма да бъде изпълнено ако _(не са изминали 15 от последния болус или не са разрешени отдалечените команди)_

*CAL 5.6*
- За да изпратите калибрация със стойност 5.6 ( ще трябва да отговорите с код Rrt )
- Ще бъде изпълнено _(ако xDrip е инсталиран на съшият телефон. и е разрешено 'Accepting calibrations' в xDrip+)_

Съвети-и-похвати
================

* Задължително правило за добрата работа на APS система от затворен тип е това базалният профил и въглехидратните числа да бъдат абсолютно точни. Всички препоръки направени от нея ще предполагат, че спадовете/пиковете, които виждате, са резултат от други фактори, които изискват еднократна намеса ( спортуване, стрес и т.н.). Промените правени от системата са лимитирани ( виж 'maximum allowed temporary basal rate' в [OpenAPS Reference Design](https://openaps.org/reference-design/)), което означава, че не бихте желали да хабите лимита за да правите корекции в неправилен базал. Ако примерно често се налага ситемата да сваля нивото на базала преди хранене, това най-вероятно означава, че базалът в този час има нужда от корекция. Може да използвате [autotune](https://openaps.readthedocs.io/en/latest/docs/walkthrough/phase-4/autotune.html) върху по-голям период, за да предложи доколко има нужда от корекции в базалите и/или чувствителността.  Или просто можете да тествате базалният профил по [стария способ](http://integrateddiabetes.com/basal-testing/).

* Използването на AndroidAPS може да ускори изтощаването на батерията на помпата в сравнение с обичайната употреба. Ако ви се случи неочаквано, то може да използвате батерията от дистанционното(глюкомера) или сетъра. Най-сигурно е да сменяте батерията при остатък от 25% като комуникацията с помпата става трудна при това число. Можете да заложите аларма и за нивото на батерията ( като използвате PUMP_WARN_BATT_P във вашия nightscout сайт). Други трикове за удължаване живота на батерията са:
  * Намаляване на времето на включен дисплей на помпата - LCD on (от DANA settings менюто)
  * Намаляване на времето на включена подсветка (от DANA settings менюто)
  * избиране на звук (beep) вместо вибрация за нотификация на помпата (от DANA settings менюто)
  * Използване на бутоните на помпата само за презареждане, а AndroidAPS за преглед на история, батерия и ниво на резервоар.

* Ако не желаете промяна на 'Опции' в AndroidAPS можете да зададете парола по ваш избор от същото меню. Така при следващото влизане в това меню първо ще бъдете попитани за паролата, преди да можете да направите някаква промяна. Премахването на паролата става с изтриването на текста в полето 'Парола'.

* Ако планирате да използвате часовник с Андроид за болуси или промяна в настройките трябва да се убедите, че нотификациите от AndroidAPS не са блокирани. Всяко потвърждение става чрез нотификация.

* Ако сваляте помпата за душ/вана/плуване/спорт и т.н. тогава натиснете и задръжте върху "Closed Loop" в началния екран и изберете "Разкачи за ..." и колкото минути/часове очаквате да бъде разкачена помпата.  Това ще приложи базал 0 за този период. Ако закачите помпата по-рано от очакваното то задъжте върху "Suspended (X mins)" и изберете "Resume". По този начин вашият IOB ще бъде правилен при последващите изчисления на алгоритъма.

* Поради съображения за сигурност препоръките се правят не само върху текущите данни за КЗ но и върху средната делта. За това може да отнеме малко повече време да се задейства системата при пропуски в четенията на сензора.

* В самият Процентен профил има допълнителна промяна на мерните единици на КЗ от mg/dl на mmol/l отделно от тази в меню "Опции". Не забравяйте да го направите и на двете места! 

* Има няколко добри блога с безценни практически съвети за closed loop системите:
  * [Fine-tuning Settings](http://seemycgm.com/2017/10/29/fine-tuning-settings/) Вижте моята CGM
  * [Why DIA matters](http://seemycgm.com/2017/08/09/why-dia-matters/)
  * [Limiting meal spikes](https://diyps.org/2016/07/11/picture-this-how-to-do-eating-soon-mode/)
  * [Hormones and autosens](http://seemycgm.com/2017/06/06/hormones-2/)

Допълнителни съвети (на английски) можете да откриете във нашата [Facebook група](https://www.facebook.com/groups/1900195340201874/)


Достъп-до-лог-файлове
=====================

За да откриете лог файловете е необходимо да:
* Свържете мобилният телефон с компютър посредством USB кабел
* Да влезете в директория с местоположение като посоченото долу  (възможно е да има малка разлика в различните телефони)

![AAPS log](../../images/aapslog.png)

* Текущият журнал е .log файл, който може да се разглежда по няколко начина, като например [LogCat] (https://developer.android.com/studio/debug/am-logcat.html) в Android Studio, Log Viewer android приложение или просто обикновен текст. Предишните регистрационни файлове се компресират и съхраняват в папки по дата / час. Ако споделяте своя регистрационен файл [gitter] (https://gitter.im/MilosKozak/AndroidAPS), когато говорите за потенциална грешка, тогава разархивирайте и качете папката, датирана преди грешката.


Dev Branch
==========

Най-стабилната версия на AndroidAPS, която ще използвате, е тази в [Master branch] (https://github.com/MilosKozak/AndroidAPS/tree/master). Препоръчително е да останете в магистърския клон, докато завършите целите и се практикувате в цикъл.

Въпреки това, [Dev клон] (https://github.com/MilosKozak/AndroidAPS/tree/dev) е добро място, за да видите какви функции се тестват и да помогнете за изглаждане на програмните грешки и да дадете обратна информация за това, как новите функции работят на практика. Кратко резюме на някои от промените в старите функции или разработването на нови функции, които понастоящем се намират в клона на Dev, е изброено по-долу, а връзките с всички известни ключови въпроси ще бъдат споделени (ако е приложимо).

** Изграждане на варианти ** <br>
Броят на вариантите за изграждане е намален до:
* пълни (т.е. препоръки, автоматично въведени в затворен цикъл)
* openloop (т.е. препоръки, дадени на потребителя за ръчно въвеждане)
* помпа за контрол на помпата (т.е. дистанционно за помпата, без примка)
* nsclient (т.е. да се показват данни за закръгляне на друг потребител и да се добавят записи в хартия)

Контролът за носене вече може да бъде разрешен или деактивиран директно от настройките на телефона; това дава на родителите повече гъвкавост и контрол върху функциите, които детето им може да използва. Часовникът трябва да се свърже с телефона при превключване на настройките - в противен случай, когато е свързан отново, натиснете отново синхронизирането от часовника или отворете менюто на часовника два пъти подред.

** Профили ** <br>
Цирков процент Профил (както timeshift и процент) вече може да работи с всеки профил. Вече не е необходимо да избирате "Профил на циркадианския процент" в конфигурационния конфигуратор, просто променете профила, като използвате превключвател на профили, а също така ще имате възможност да промените временното преместване и / или процента. Това означава, че можете лесно да кажете на AndroidAPS да намали профила ви (основно, болус и чувствителност) с 30% в продължение на 6 часа, например при упражнения без да се налага да копирате и поставяте профили. Local Profile също е преработен.
Превключването на профили вече може да се задейства от NS Client (взимане от вписване в Nightscout Careportal) или от Switch Profile в AndroidAPS. Това означава, че можете да използвате системите, базирани на условни твърдения (например IFTTT / Automate / Tracker), за да промените автоматично профила си за вас въз основа на други входове (например записи в календара, физическо местоположение).

** DanaR / RS Болус Скорости ** <br>
В "Предпочитания" в настройките за помпа DanaR / DanaRS можете да изберете използваната стандартна скорост на болуса (12 сек за 1u, 30sec за 1u или 60sec за 1u).

** Temp Targets Default ** <br>
В "Предпочитания" под "Други" можете да зададете стойности по подразбиране за различните видове целеви групи (ядене и активност). Когато изберете временна цел, ако изберете например "Хранене скоро" от падащото меню, тя ще попълни автоматично продължителността и стойността за вас въз основа на предоставените от вас цифри.

** GUI ** <br>
Оформлението на обзора е подобрено и са добавени още икони. Комуникацията DanaR е по-подробна в статус.

** DanaRS водач ** <br>
DanaRS драйверът е добавен за работа с новата помпа DanaRS, налична скоро от SOOIL.

** Rhino javascript двигател ** <br>
Преминаване към двигател на Rhino javascript.

Както при всички актуализации, предишният код е бил изчистен, подобрен и грешки са фиксирани.

Ако откриете грешка или смятате, че нещо се е случило погрешно, когато използвате клона на Dev, разгледайте раздела [isues tab] (https://github.com/MilosKozak/AndroidAPS/issues), за да проверите дали някой друг е намерил това или да добавите ако не. Колкото повече информация можете да споделите тук, толкова по-добре (не забравяйте, че може да се наложи да споделите вашите [log files] (https://github.com/MilosKozak/AndroidAPS/wiki/Accessing-logfiles)). Новите функции могат да бъдат обсъдени и в [gitter room] (https://gitter.im/MilosKozak/AndroidAPS).